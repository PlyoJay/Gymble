<Window x:Class="Gymble.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Gymble"
        xmlns:vm="clr-namespace:Gymble.ViewModels"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="MainWindow" Height="760" Width="1280"
        Style="{StaticResource WindowChromeStyle}" WindowStartupLocation="CenterScreen">
    <Window.DataContext>
        <vm:MainWindowViewModel/>
    </Window.DataContext>
    
    <materialDesign:DialogHost DialogTheme="Inherit" Background="Transparent">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <Grid Grid.ColumnSpan="2" WindowChrome.IsHitTestVisibleInChrome="True"
                  Background="{StaticResource TitleBarBgColor}">
                <TextBlock Text="GYMBLE" Margin="20 0"
                           FontWeight="Bold" FontSize="18" VerticalAlignment="Center"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <Button Content="X" Style="{StaticResource WIndowChromeButtonStyle}"
                            Foreground="Black" FontSize="18" FontWeight="Bold"
                            HorizontalAlignment="Right"
                            Command="{Binding CloseCommand}"
                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"/>
                </StackPanel>
            </Grid>
            <materialDesign:DrawerHost 
                x:Name="RootDrawer" IsLeftDrawerOpen="{Binding IsDrawerOpen, Mode=TwoWay}" 
                OpenMode="Default" Grid.Row="1">
                <materialDesign:DrawerHost.LeftDrawerContent>
                    <DockPanel MinWidth="200" Background="White"
                               DataContext="{Binding DataContext, RelativeSource={RelativeSource AncestorType={x:Type materialDesign:DrawerHost}}}">
                        <Grid Height="55" DockPanel.Dock="Top">
                            <ToggleButton Margin="10 0"
                                HorizontalAlignment="Right"                           
                                IsChecked="{Binding IsDrawerOpen, Mode=TwoWay}"
                                Style="{StaticResource MaterialDesignHamburgerToggleButton}" />
                        </Grid>

                        <ListBox ItemsSource="{Binding NavigationItems}"
                                 BorderThickness="0"
                                 Background="Transparent">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Button Command="{Binding Command}" CommandParameter="{Binding TagName}" 
                                            Style="{StaticResource MaterialDesignFlatButton}" Background="Transparent" BorderThickness="0">
                                        <StackPanel Orientation="Horizontal">
                                            <materialDesign:PackIcon Kind="{Binding IconKind}" Width="24" Height="24" VerticalAlignment="Center"/>
                                            <TextBlock Text="{Binding Label}" FontSize="16" FontWeight="Bold" Margin="10 0"/>
                                        </StackPanel>
                                    </Button>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </DockPanel>
                </materialDesign:DrawerHost.LeftDrawerContent>

                <Border>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="50"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <ToggleButton x:Name="MenuToggleButton" AutomationProperties.Name="HamburgerToggleButton" 
                                      IsChecked="{Binding IsDrawerOpen, Mode=TwoWay}"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"
                                      Style="{StaticResource MaterialDesignHamburgerToggleButton}"/>

                        <Border Grid.ColumnSpan="2" 
                                BorderBrush="{StaticResource DefaultBorderBrushColor}"
                                BorderThickness="0 1">
                            
                        </Border>

                        <Border Grid.RowSpan="2"
                                BorderBrush="{StaticResource DefaultBorderBrushColor}"
                                BorderThickness="0 0 1 0">
                            
                        </Border>

                        <ContentControl Grid.Row="1" Grid.Column="1" Margin="12" 
                                        Content="{Binding CurrentViewModel}"/>
                    </Grid>
                </Border>
            </materialDesign:DrawerHost>
        </Grid>
    </materialDesign:DialogHost>
</Window>
